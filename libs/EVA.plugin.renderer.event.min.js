function _extends(){return(_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}this.EVA=this.EVA||{},this.EVA.plugin=this.EVA.plugin||{},this.EVA.plugin.renderer=this.EVA.plugin.renderer||{},this.EVA.plugin.renderer.event=function(t,e,n,o){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a}function p(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t}var c,l={Circle:o.Circle,Ellipse:o.Ellipse,Polygon:o.Polygon,Rect:o.Rectangle,RoundedRect:o.RoundedRectangle},d={Circle:["x","y","radius"],Ellipse:["x","y","width","height"],Rect:["x","y","width","height"],RoundedRect:["x","y","width","height","radius"],Polygon:["paths"]},u=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Event",e}return i(o,t),o.prototype.init=function(t){var n=(void 0===t?{}:t).moveWhenInside,o=void 0!==n&&n;this.renderSystem=this.game.getSystem(e.RendererSystem),this.renderSystem.rendererManager.register(this);try{this.renderSystem.application.renderer.plugins.interaction.moveWhenInside=o}catch(t){console.error("Setting moveWhenInside error.",t)}},o.prototype.componentChanged=function(t){switch(t.type){case n.OBSERVER_TYPE.ADD:this.add(t);break;case n.OBSERVER_TYPE.REMOVE:this.remove(t);break;case n.OBSERVER_TYPE.CHANGE:this.change(t)}},o.prototype.add=function(t){var e=this.containerManager.getContainer(t.gameObject.id);e.interactive=!0,e.interactiveChildren=!0;var n=t.component;n.hitArea&&this.addHitArea(t,e,n.hitArea),e.on("pointertap",(function(t){n.emit("tap",{stopPropagation:function(){return t.stopPropagation()},data:{pointerId:t.data.pointerId,position:{x:t.data.global.x,y:t.data.global.y}},gameObject:n.gameObject})})),e.on("pointerdown",(function(t){n.emit("touchstart",{stopPropagation:function(){return t.stopPropagation()},data:{pointerId:t.data.pointerId,position:{x:t.data.global.x,y:t.data.global.y}},gameObject:n.gameObject})})),e.on("pointermove",(function(t){n.emit("touchmove",{stopPropagation:function(){return t.stopPropagation()},data:{pointerId:t.data.pointerId,position:{x:t.data.global.x,y:t.data.global.y}},gameObject:n.gameObject})})),e.on("pointerup",(function(t){n.emit("touchend",{stopPropagation:function(){return t.stopPropagation()},data:{pointerId:t.data.pointerId,position:{x:t.data.global.x,y:t.data.global.y}},gameObject:n.gameObject})})),e.on("pointerupoutside",(function(t){n.emit("touchendoutside",{stopPropagation:function(){return t.stopPropagation()},data:{pointerId:t.data.pointerId,position:{x:t.data.global.x,y:t.data.global.y}},gameObject:n.gameObject})})),e.on("pointercancel",(function(t){n.emit("touchcancel",{stopPropagation:function(){return t.stopPropagation()},data:{pointerId:t.data.pointerId,position:{x:t.data.global.x,y:t.data.global.y}},gameObject:n.gameObject})}))},o.prototype.remove=function(t){var e=this.containerManager.getContainer(t.gameObject.id);e.interactive=!1,e.off("tap"),e.off("pointerdown"),e.off("pointermove"),e.off("pointerup"),e.off("pointerupoutside"),e.off("pointercancel"),t.component.removeAllListeners()},o.prototype.change=function(t){var e=this.containerManager.getContainer(t.gameObject.id);e.interactive=!0;var n=t.component;n.hitArea?this.addHitArea(t,e,n.hitArea):n.hitArea=null},o.prototype.addHitArea=function(t,e,n){var o,r,i,a=n.type,c=n.style;if(l[a]){var u=[];try{for(var s=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(d[a]),f=s.next();!f.done;f=s.next()){var y=f.value;u.push(c[y])}}catch(t){o={error:t}}finally{try{f&&!f.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}var g=new((i=l[a]).bind.apply(i,p([void 0],u)));e.hitArea=g}else console.error(t.gameObject.name+"'s hitArea type is not defined")},o.systemName="Event",o=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}([n.decorators.componentObserver({Event:[{prop:["hitArea"],deep:!0}]})],o)}(e.Renderer);t.HIT_AREA_TYPE=void 0,(c=t.HIT_AREA_TYPE||(t.HIT_AREA_TYPE={})).Circle="Circle",c.Ellipse="Ellipse",c.Polygon="Polygon",c.Rect="Rect",c.RoundedRect="RoundedRect";var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hitArea=void 0,e}return i(e,t),e.prototype.init=function(t){t&&_extends(this,t)},e.prototype.emit=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return t.prototype.emit.apply(this,p([e],n))},e.prototype.once=function(e,n,o){return t.prototype.once.call(this,e,n,o)},e.prototype.on=function(e,n,o){return t.prototype.on.call(this,e,n,o)},e.componentName="Event",e}(n.Component);return t.Event=s,t.EventSystem=u,Object.defineProperty(t,"__esModule",{value:!0}),t}({},EVA.plugin.renderer,EVA,PIXI);